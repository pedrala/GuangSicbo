{"remainingRequest":"/Users/crazycapital/Downloads/GuangGame/gsicboDeliver201909302/sources_20190930/gsicbo-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/crazycapital/Downloads/GuangGame/gsicboDeliver201909302/sources_20190930/gsicbo-client/src/components/sicbo/HistoryDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/crazycapital/Downloads/GuangGame/gsicboDeliver201909302/sources_20190930/gsicbo-client/src/components/sicbo/HistoryDetail.vue","mtime":1567760082000},{"path":"/Users/crazycapital/Downloads/GuangGame/gsicboDeliver201909302/sources_20190930/gsicbo-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/crazycapital/Downloads/GuangGame/gsicboDeliver201909302/sources_20190930/gsicbo-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/crazycapital/Downloads/GuangGame/gsicboDeliver201909302/sources_20190930/gsicbo-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { isPair, isSmall, isOdd } from '../../js/sicbo.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      bets: []\r\n    }\r\n  },\r\n  props: {\r\n    game: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          card1: 0,\r\n          card2: 1,\r\n          uid: 'unknown',\r\n          bet_total:0,\r\n          prize_total: 0,\r\n          reveal_trx: ''\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.game.id === undefined) {\r\n      this.close();\r\n    }\r\n\r\n    this.fetchBetData(this.game.id);\r\n  },\r\n  watch: {\r\n    game: function(game) {\r\n      this.fetchBetData(game.id);\r\n    }\r\n  },\r\n  computed: {\r\n    /**\r\n     * 화면에 출력할 상금을 계산한다.\r\n     */\r\n    prize() {\r\n      if (this.game.prize_total - this.game.bet_total > 0) {\r\n        return `+${this.formatedNumber(this.game.prize_total - this.game.bet_total)} TAZ Chip`;\r\n      }\r\n      return '- TAZ Chip';\r\n    },\r\n    /**\r\n     * 상금에 따른 css class를 결정한다.\r\n     */\r\n    classPrize() {\r\n      if (this.game.prize_total - this.game.bet_total > 0) {\r\n        return 'total';\r\n      }\r\n\r\n      return 'total loser';\r\n    },\r\n    /**\r\n     * 게임 결과 1\r\n     */\r\n    result1() {\r\n      if (isPair(this.game.card1, this.game.card2)) {\r\n        return 'Pair';\r\n      } else if (isSmall(this.game.card1, this.game.card2)) {\r\n        return 'Small'\r\n      }\r\n      return 'Big';\r\n    },\r\n    /**\r\n     * 게임 결과 2\r\n     */\r\n    result2() {\r\n      if (isPair(this.game.card1, this.game.card2)) {\r\n        return '';\r\n      } else if (isOdd(this.game.card1, this.game.card2)) {\r\n        return 'Odd';\r\n      }\r\n      return 'Even';\r\n    },\r\n    /**\r\n     * 플레이어의 account를 반환한다.\r\n     */\r\n    user() {\r\n      return (this.game.uid) ? this.game.uid : 'unknown';\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 카드 번호에 대한 카드 이미지 경로\r\n     */\r\n    cardUrl(num) {\r\n      if (num < 10) {\r\n        return `/img/sicbo/card/0${num}.svg`;\r\n      }\r\n      return `/img/sicbo/card/${num}.svg`;\r\n    },\r\n    /**\r\n     * 상세 UI를 닫는다.\r\n     */\r\n    close() {\r\n      this.$emit('close');\r\n    },\r\n    /**\r\n     * 숫자 3자리 마다 ,를 추가\r\n     */\r\n    formatedNumber(num) {\r\n      const regexp = /\\B(?=(\\d{3})+(?!\\d))/g;\r\n      return num.toString().replace(regexp, ',');\r\n    },\r\n    /**\r\n     * 배팅한 포지션의 이름\r\n     */\r\n    positionName(position) {\r\n      const POSITIONS = [\r\n        'Small', '光', 'Big', 'Odd', 'Even', '1 Pair', '2 Pair', '3 Pair', '4 Pair', '5 Pair', '6 Pair', '7 Pair', '8 Pair', '9 Pair', '10 Pair',\r\n        'Pair', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10'\r\n      ]\r\n      return POSITIONS[position];\r\n    },\r\n    /**\r\n     * reveal을 실행한 트랜젝션에 대한 정보를 bloks.io에서 조회한다.\r\n     */\r\n    openBloksIO() {\r\n      window.open(`https://bloks.io/transaction/${this.game.reveal_trx}`, '_blank');\r\n    },\r\n    /**\r\n     * 게임 데이터를 서버에 요청한다.\r\n     */\r\n    fetchBetData(gid) {\r\n      fetch(`${this.$REST_API_SERVER}/api/v1/bets?gid=${gid}`).then(res => {\r\n        res.json().then(data => {\r\n          this.bets = data;\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          this.bets = [];\r\n        })  \r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        this.bets = [];\r\n      });\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["HistoryDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HistoryDetail.vue","sourceRoot":"src/components/sicbo","sourcesContent":["<template>\r\n  <div class=\"modal-mask\">\r\n    <div class=\"content-outside\" @click=\"close\"></div>\r\n    <div class=\"content-wrap\">\r\n      <div class=\"header\">\r\n        <div class=\"flex flex-middle flex-wfill\">\r\n          <img :src=\"cardUrl(game.card1)\" class=\"card\" />\r\n          <img :src=\"cardUrl(game.card2)\" class=\"card right\" />\r\n\r\n          <div class=\"result\">{{result1}}</div>\r\n          <div class=\"result right\">{{result2}}</div>\r\n        </div>\r\n        <div class=\"box-btn-close\">\r\n          <img src=\"/img/ic-modal-close.svg\" alt=\"\" class=\"close-btn\" @click=\"close\">\r\n        </div>\r\n      </div>\r\n      <div class=\"contents\">\r\n        <div class=\"row-0\">\r\n          <div class=\"account\">{{user}}</div>\r\n          <div :class=\"classPrize\">{{prize}}</div>\r\n        </div>\r\n        <div class=\"row-1\">\r\n          <div class=\"header\">\r\n            <div class=\"col-0\">{{$t('sicbo.info.type')}}</div>\r\n            <div class=\"col-1\">{{$t('sicbo.info.betamount')}}</div>\r\n            <div class=\"col-2\">{{$t('sicbo.info.payout')}}</div>\r\n          </div>\r\n\r\n          <div v-for=\"(bet, index) of bets\" class=\"item\" :key=\"index\">\r\n            <div class=\"col-0\">{{positionName(bet.position)}}</div>\r\n            <div class=\"col-1\">{{formatedNumber(bet.amount)}}</div>\r\n            <div class=\"col-2\">{{formatedNumber(bet.payout)}}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"row-2\">\r\n          <button class=\"btn-block\" @click=\"openBloksIO\">Bloks.io</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isPair, isSmall, isOdd } from '../../js/sicbo.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      bets: []\r\n    }\r\n  },\r\n  props: {\r\n    game: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          card1: 0,\r\n          card2: 1,\r\n          uid: 'unknown',\r\n          bet_total:0,\r\n          prize_total: 0,\r\n          reveal_trx: ''\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.game.id === undefined) {\r\n      this.close();\r\n    }\r\n\r\n    this.fetchBetData(this.game.id);\r\n  },\r\n  watch: {\r\n    game: function(game) {\r\n      this.fetchBetData(game.id);\r\n    }\r\n  },\r\n  computed: {\r\n    /**\r\n     * 화면에 출력할 상금을 계산한다.\r\n     */\r\n    prize() {\r\n      if (this.game.prize_total - this.game.bet_total > 0) {\r\n        return `+${this.formatedNumber(this.game.prize_total - this.game.bet_total)} TAZ Chip`;\r\n      }\r\n      return '- TAZ Chip';\r\n    },\r\n    /**\r\n     * 상금에 따른 css class를 결정한다.\r\n     */\r\n    classPrize() {\r\n      if (this.game.prize_total - this.game.bet_total > 0) {\r\n        return 'total';\r\n      }\r\n\r\n      return 'total loser';\r\n    },\r\n    /**\r\n     * 게임 결과 1\r\n     */\r\n    result1() {\r\n      if (isPair(this.game.card1, this.game.card2)) {\r\n        return 'Pair';\r\n      } else if (isSmall(this.game.card1, this.game.card2)) {\r\n        return 'Small'\r\n      }\r\n      return 'Big';\r\n    },\r\n    /**\r\n     * 게임 결과 2\r\n     */\r\n    result2() {\r\n      if (isPair(this.game.card1, this.game.card2)) {\r\n        return '';\r\n      } else if (isOdd(this.game.card1, this.game.card2)) {\r\n        return 'Odd';\r\n      }\r\n      return 'Even';\r\n    },\r\n    /**\r\n     * 플레이어의 account를 반환한다.\r\n     */\r\n    user() {\r\n      return (this.game.uid) ? this.game.uid : 'unknown';\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 카드 번호에 대한 카드 이미지 경로\r\n     */\r\n    cardUrl(num) {\r\n      if (num < 10) {\r\n        return `/img/sicbo/card/0${num}.svg`;\r\n      }\r\n      return `/img/sicbo/card/${num}.svg`;\r\n    },\r\n    /**\r\n     * 상세 UI를 닫는다.\r\n     */\r\n    close() {\r\n      this.$emit('close');\r\n    },\r\n    /**\r\n     * 숫자 3자리 마다 ,를 추가\r\n     */\r\n    formatedNumber(num) {\r\n      const regexp = /\\B(?=(\\d{3})+(?!\\d))/g;\r\n      return num.toString().replace(regexp, ',');\r\n    },\r\n    /**\r\n     * 배팅한 포지션의 이름\r\n     */\r\n    positionName(position) {\r\n      const POSITIONS = [\r\n        'Small', '光', 'Big', 'Odd', 'Even', '1 Pair', '2 Pair', '3 Pair', '4 Pair', '5 Pair', '6 Pair', '7 Pair', '8 Pair', '9 Pair', '10 Pair',\r\n        'Pair', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10'\r\n      ]\r\n      return POSITIONS[position];\r\n    },\r\n    /**\r\n     * reveal을 실행한 트랜젝션에 대한 정보를 bloks.io에서 조회한다.\r\n     */\r\n    openBloksIO() {\r\n      window.open(`https://bloks.io/transaction/${this.game.reveal_trx}`, '_blank');\r\n    },\r\n    /**\r\n     * 게임 데이터를 서버에 요청한다.\r\n     */\r\n    fetchBetData(gid) {\r\n      fetch(`${this.$REST_API_SERVER}/api/v1/bets?gid=${gid}`).then(res => {\r\n        res.json().then(data => {\r\n          this.bets = data;\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          this.bets = [];\r\n        })  \r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        this.bets = [];\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../scss/flex.scss';\r\n@import '../../scss/fonts.scss';\r\n\r\n.modal-mask {\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 5000;\r\n  top: 0;\r\n  left: 0;\r\n  background-color: rgba(0, 0, 0, .5);\r\n  color: white;\r\n  box-sizing: content-box;\r\n}\r\n\r\n.content-outside {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  z-index: 5100;\r\n}\r\n\r\n.content-wrap {\r\n  position: absolute;\r\n  top: 80px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  z-index: 5200;\r\n  box-sizing: border-box;\r\n  background: #2F1412;\r\n  border: 1px solid #6A4744;\r\n  border-radius: 8px;\r\n  width: 300px;\r\n  height: 490px;\r\n  \r\n  @media (min-width: 984px) {\r\n    top: 150px;\r\n    width: 560px;\r\n    height: 664px;\r\n  }\r\n}\r\n\r\n.header {\r\n  width: 100%;\r\n  height: 52px;\r\n  border-bottom: 2px solid #6A4744;\r\n  box-sizing: border-box;\r\n  @extend .flex;\r\n  @extend .flex-middle;\r\n  padding: 4px 8px 0px 16px;\r\n  \r\n  @media (min-width: 984px) {\r\n    height: 120px;\r\n    padding: 8px 16px 0px;\r\n  }\r\n\r\n  .card {\r\n    width: 25px;\r\n    height: 38px;\r\n\r\n    @media (min-width: 984px) {\r\n      width: 66px;\r\n      height: 97px;\r\n    }\r\n\r\n    &.right {\r\n      margin-left: 6px;\r\n      \r\n      @media (min-width: 984px) {\r\n        margin-left: 12px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .result {\r\n    font-weight: 500;\r\n    font-size: 20px;\r\n    line-height: 23px;\r\n    color: #FFF389;\r\n    width: 68px;\r\n    margin-left: 12px;\r\n    text-align: center;\r\n\r\n    @media (min-width: 984px) {\r\n      font-size: 24px;\r\n      line-height: 28px;\r\n      width: 90px;\r\n    }\r\n    \r\n    &.right {\r\n      margin-left: 8px;\r\n      @media (min-width: 984px) {\r\n        margin-left: 32px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .box-btn-close {\r\n    height: 100%;\r\n    padding-top: 4px;\r\n    \r\n    @media (min-width: 984px) {\r\n      padding-top: 8px;\r\n    }\r\n  }\r\n\r\n  .close-btn {\r\n    width: 40px;\r\n    height: 40px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.contents {\r\n  width: 100%;\r\n  padding: 0px 16px;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n\r\n  @media (min-width: 984px) {\r\n    padding: 0px 32px;\r\n  }\r\n}\r\n\r\n.row-0 {\r\n  @extend .flex;\r\n  @extend .flex-middle;\r\n  justify-content: space-between;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 40px;\r\n\r\n  @media (min-width: 984px) {\r\n    height: 52px;\r\n  }\r\n\r\n  .account {\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    line-height: 16px;\r\n    color: white;\r\n\r\n    @media (min-width: 984px) {\r\n      font-size: 16px;\r\n      line-height: 19px;\r\n    }\r\n  }\r\n\r\n  .total {\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    line-height: 16px;\r\n    color: #13EB1B;\r\n\r\n    @media (min-width: 984px) {\r\n      font-size: 16px;\r\n      line-height: 19px;\r\n    }\r\n\r\n    &.loser {\r\n      color: white;\r\n    }\r\n  }\r\n}\r\n\r\n.row-1 {\r\n  height: 338px;\r\n  background: #431C19;\r\n  border: 1px solid #6A4744;\r\n\r\n  @media (min-width: 984px) {\r\n    height: 390px;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n  }\r\n\r\n  .header {\r\n    @extend .flex;\r\n    @extend .flex-middle;\r\n    // justify-content: space-between;\r\n    box-sizing: border-box;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    line-height: 14px;\r\n    color: #FFF389;\r\n    height: 24px;\r\n    border-bottom: 1px solid #6A4744;\r\n    padding: 0px 4px;\r\n\r\n    @media (min-width: 984px) {\r\n      font-size: 16px;\r\n      line-height: 19px;\r\n      height: 33px;\r\n      padding: 0px 8px;\r\n    }\r\n\r\n    .col-0 {\r\n      width: 20%;\r\n      text-align: left;\r\n    }\r\n    .col-1 {\r\n      width: 40%;\r\n      text-align: right;\r\n    }\r\n    .col-2 {\r\n      width: 40%;\r\n      text-align: right;\r\n    }\r\n  }\r\n\r\n  .item {\r\n    @extend .flex;\r\n    @extend .flex-middle;\r\n    justify-content: space-between;\r\n    box-sizing: border-box;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    line-height: 14px;\r\n    color: white;\r\n    height: 30px;\r\n    padding: 0px 4px;\r\n    margin-bottom: 8px;\r\n\r\n    @media (min-width: 984px) {\r\n      font-size: 16px;\r\n      line-height: 19px;\r\n      height: 32px;\r\n      padding: 0px 8px;\r\n    }\r\n\r\n    .col-0 {\r\n      width: 20%;\r\n      text-align: left;\r\n    }\r\n    .col-1 {\r\n      width: 40%;\r\n      text-align: right;\r\n    }\r\n    .col-2 {\r\n      width: 40%;\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n\r\n.row-2 {\r\n  width: 100%;\r\n  margin-top: 10px;\r\n  @extend .flex;\r\n  @extend .flex-center;\r\n\r\n  @media (min-width: 984px) {\r\n    margin-top: 39px;\r\n  }\r\n}\r\n\r\n.btn-block {\r\n  width: 98px;\r\n  height: 32px;\r\n  background: #612D17;\r\n  border-radius: 5px;\r\n  outline: none;\r\n  color: #FFFFFF;\r\n\r\n  @media (min-width: 984px) {\r\n    width: 116px;\r\n    height: 38px;\r\n  }\r\n}\r\n</style>"]}]}